<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hiro - Introduction</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Global CSS -->
  <link rel="stylesheet" href="../assets/css/site.css" />

  <!-- Accordion scroll progress (updates --acc) -->
  <script src="../assets/js/accordion-unfold.js" defer></script>
</head>

<body class="page-intro">
  <div class="bg-orbit"></div>

  <!-- ================= Header ================= -->
  <header class="site-header">
    <div class="site-logo">
      <span class="logo-mark">HI</span>
      <span class="logo-text">Hiro</span>
    </div>
    <nav class="site-nav">
      <a href="./" class="nav-link active">Top</a>
      <a href="../studies/" class="nav-link">Studies</a>
      <a href="../studies/origami/" class="nav-link">Origami App</a>
    </nav>
  </header>

  <main>
    <!-- ================= Video Hero ================= -->
    <section class="content-hero content-hero--video">
      <div class="hero-video-frame">
        <div class="video-bg" aria-hidden="true">
          <video
            id="heroVideo"
            autoplay
            muted
            loop
            playsinline
            preload="auto"
          >
            <source src="../assets/videos/ORIGAMI.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>

        <div class="video-overlay" aria-hidden="true"></div>

        <div class="hero-overlay-ui">
          <div class="hero-caption">
            <h1 class="hero-title hero-title--minimal">
              Hi, I'm <span class="hero-name">Hiro</span>.
            </h1>
          </div>

          <button
            class="video-control"
            id="videoToggle"
            type="button"
            aria-pressed="false"
          >
            <span class="video-control__icon">❚❚</span>
            <span class="video-control__text">Pause</span>
          </button>
        </div>
      </div>
    </section>

    <!-- ================= Accordion (蛇腹) Section ================= -->
    <section class="section accordion-stage" data-acc="0">
      <div class="container">
        <div class="accordion-paper">

          <!-- NEW: visible area controller (so folds can remain “there”) -->
          <div class="accordion-mask">
            <div class="accordion-surface">

              <!-- NEW: compress only the content (text) -->
              <div class="accordion-content">
                <div class="hero-inner hero-inner--split">
                  <div class="hero-text">
                    <p class="hero-kicker">Student • Math & Origami</p>
                    <h2 class="section-title">One-cut Origami</h2>

                    <p class="hero-desc">
                      Have you ever heard of one-cut origami?
                      <br /><br />
                      With just three folds and a single diagonal cut, a star suddenly appears.
                      That simple moment of surprise is what one-cut origami is all about.
                      What makes it even more exciting is that, in theory, any shape can be
                      created with only one cut, as long as the folding is done thoughtfully.
                      <br /><br />
                      I built this page to share the fun and elegance of origami mathematics
                      through one-cut origami, a hobby I enthusiastically dove into when I
                      was in middle school.
                    </p>

                    <div class="hero-actions">
                      <a href="../studies/index.html" class="btn btn-primary">
                        See study overview
                      </a>
                      <a href="../studies/origami/index.html" class="btn btn-ghost">
                        Explore origami app
                      </a>
                    </div>
                  </div>
                </div>

                <div class="hero-inner hero-inner--single">
                  <div class="hero-visual">
                  </div>
                </div>
              </div><!-- /.accordion-content -->

            </div><!-- /.accordion-surface -->
          </div><!-- /.accordion-mask -->

        </div><!-- /.accordion-paper -->
      </div><!-- /.container -->
    </section>
  </main>

  <!-- ================= Footer ================= -->
  <footer class="site-footer">
    <small>&copy; <span id="year"></span> Hiro</small>
  </footer>

  <!-- ================= Scripts ================= -->
  <script>
    /* year */
    document.getElementById("year").textContent = new Date().getFullYear();

    /* video toggle + autoplay fail-safe */
    const video = document.getElementById("heroVideo");
    const btn = document.getElementById("videoToggle");

    if (video && btn) {
      const icon = btn.querySelector(".video-control__icon");
      const text = btn.querySelector(".video-control__text");

      const setPaused = (paused) => {
        icon.textContent = paused ? "▶" : "❚❚";
        text.textContent = paused ? "Play" : "Pause";
        btn.setAttribute("aria-pressed", paused ? "true" : "false");
      };

      // Autoplayが環境的にブロックされた時の保険
      const tryAutoplay = async () => {
        try {
          await video.play();
          setPaused(false);
        } catch (e) {
          // 自動再生失敗 -> 見た目だけ「Play」に
          setPaused(true);
        }
      };

      // iOS/Safariなどで load直後に play() できない場合があるので試す
      tryAutoplay();

      btn.addEventListener("click", async () => {
        if (video.paused) {
          try {
            await video.play();
            setPaused(false);
          } catch (e) {
            setPaused(true);
          }
        } else {
          video.pause();
          setPaused(true);
        }
      });
    }
  </script>
</body>
</html>